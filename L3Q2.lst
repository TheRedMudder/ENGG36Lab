C:\Kwong\L3Q2.lst - generated by MGTEK Assembler ASM12 V1.26 Build 144 for WIN32 (x86) - Fri Nov 02 00:45:56 2018

    1:          =00000020              N       equ     32      ;N=32
    2:          =00001000                      org     $1000   ;SP=$1000
    3:     1000 01 02 03 04 05 06      arr     db      1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16;Define Array
           1006 07 08 09 0A 0B 0C 
           100C 0D 0E 0F 10 
    4:     1010 11 12 13 14 15 16              db      17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32
           1016 17 18 19 1A 1B 1C 
           101C 1D 1E 1F 20 
    5:          =00001100                      org     $1100   ;SP=$1100
    6:     1100 +0002                  sq_ave  rmb     2       ;Reserve 2 bytes for sq_ave
    7:     1102 +0002                  sq_sum  rmb     2       ;Reserve 1 byte for count
    8:     1104 +0001                  elemloc rmb     1       ;Reserve 1 byte for elemloc
    9:          =00002000                      org     $2000   ;SP=$2000
   10:     2000 CE 1000                        ldx     #arr    ;load memory location of arr
   11:     2003 79 1102                        clr     sq_sum  ;set count =0
   12:     2006 C6 20                          ldab    #N      ;Load N(32) into B
   13:     2008 A6 00                  loop    ldaa    0,x     ;Load element of arr into A
   14:     200A 7B 1104                        stab    elemloc ;Save B into elemloc(B is continously decreasing)
   15:     200D E6 00                          ldab    0,x     ;Load element of arr into B
   16:     200F 12                             mul             ;Multiply A*B->A:B
   17:     2010 F3 1102                        addd    sq_sum  ;Add sq_sum     
   18:     2013 7C 1102                        std     sq_sum  ;Store D
   19:     2016 08                             inx             ;Increment X
   20:     2017 F6 1104                        ldab    elemloc ;Load Element Location
   21:     201A 04 31 EB                       dbne    b,loop  ;Decrease b and branch if not 0
   22:                                         
   23:     201D FC 1102                        ldd     sq_sum  ;Load sq_sum into D
   24:     2020 CE 0020                        ldx     #N      ;Load 32
   25:     2023 1811                           fdiv            ;D/x->X(quotient),D(remainder)
   26:     2025 7E 1100                        stx     sq_ave  ;Store X->str_ave
   27:     2028 3F                             swi             ;Software Interrupt
   28:                                         end

Symbols:
arr                             *00001000
elemloc                         *00001104
loop                            *00002008
n                               *00000020
sq_ave                          *00001100
sq_sum                          *00001102

